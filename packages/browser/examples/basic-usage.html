<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swiss Ephemeris Browser - Basic Usage Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
        }
        .result {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Swiss Ephemeris Browser Example</h1>
    <p>Calculate planetary positions using WebAssembly in the browser.</p>

    <div>
        <button onclick="calculateSunPosition()">Calculate Sun Position</button>
        <button onclick="calculateMoonPosition()">Calculate Moon Position</button>
        <button onclick="calculateBirthChart()">Calculate Birth Chart</button>
    </div>

    <div id="output" class="loading">Initializing Swiss Ephemeris...</div>

    <script type="module">
        import { SwissEphemeris, Planet, HouseSystem, CalendarType } from '../dist/swisseph-browser.js';

        // Initialize the Swiss Ephemeris
        const swe = new SwissEphemeris();
        await swe.init();

        const output = document.getElementById('output');
        output.innerHTML = '<strong>Swiss Ephemeris initialized successfully!</strong><br>Click a button above to calculate positions.';
        output.classList.remove('loading');

        // Make functions available globally for button onclick
        window.calculateSunPosition = function() {
            const jd = swe.julianDay(2007, 3, 3);
            const sun = swe.calculatePosition(jd, Planet.Sun);

            output.innerHTML = `
                <strong>Sun Position on March 3, 2007</strong><br>
                Longitude: ${sun.longitude.toFixed(6)}°<br>
                Latitude: ${sun.latitude.toFixed(6)}°<br>
                Distance: ${sun.distance.toFixed(6)} AU<br>
                Longitude Speed: ${sun.longitudeSpeed.toFixed(6)}°/day
            `;
        };

        window.calculateMoonPosition = function() {
            const jd = swe.julianDay(2007, 3, 3);
            const moon = swe.calculatePosition(jd, Planet.Moon);

            output.innerHTML = `
                <strong>Moon Position on March 3, 2007</strong><br>
                Longitude: ${moon.longitude.toFixed(6)}°<br>
                Latitude: ${moon.latitude.toFixed(6)}°<br>
                Distance: ${moon.distance.toFixed(6)} AU<br>
                Longitude Speed: ${moon.longitudeSpeed.toFixed(6)}°/day
            `;
        };

        window.calculateBirthChart = function() {
            // Example: New York, March 3, 2007, noon
            const year = 2007, month = 3, day = 3, hour = 12;
            const latitude = 40.7128, longitude = -74.0060;

            const jd = swe.julianDay(year, month, day, hour);

            // Calculate house cusps and angles
            const houses = swe.calculateHouses(jd, latitude, longitude, HouseSystem.Placidus);

            // Calculate planets
            const sun = swe.calculatePosition(jd, Planet.Sun);
            const moon = swe.calculatePosition(jd, Planet.Moon);
            const mercury = swe.calculatePosition(jd, Planet.Mercury);
            const venus = swe.calculatePosition(jd, Planet.Venus);
            const mars = swe.calculatePosition(jd, Planet.Mars);

            output.innerHTML = `
                <strong>Birth Chart: March 3, 2007, 12:00 PM, New York</strong><br><br>

                <strong>Angles:</strong><br>
                Ascendant: ${houses.ascendant.toFixed(2)}°<br>
                MC (Midheaven): ${houses.mc.toFixed(2)}°<br>
                Vertex: ${houses.vertex.toFixed(2)}°<br><br>

                <strong>Planets:</strong><br>
                Sun: ${sun.longitude.toFixed(2)}°<br>
                Moon: ${moon.longitude.toFixed(2)}°<br>
                Mercury: ${mercury.longitude.toFixed(2)}°<br>
                Venus: ${venus.longitude.toFixed(2)}°<br>
                Mars: ${mars.longitude.toFixed(2)}°<br><br>

                <strong>House System:</strong> ${houses.houseSystem}
            `;
        };
    </script>
</body>
</html>
